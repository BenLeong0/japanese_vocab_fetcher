(this["webpackJsonpreact-interface"]=this["webpackJsonpreact-interface"]||[]).push([[0],Array(19).concat([function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(12),c=n.n(r),i=(n(19),n(2)),o=n(10),l=n.p+"static/media/icon_error.f3363445.svg",u=(n(20),n(0)),d=function(e){var t=e.children;return Object(u.jsxs)("div",{className:"error-message vertical-separation-large",children:[Object(u.jsx)("img",{src:l,alt:"error icon"}),t,Object(u.jsx)("img",{src:l,alt:"error icon"})]})},j=n(4),f=n.n(j),m=n(6),b=n(13),p=(n(23),function(){return Object(u.jsx)("div",{className:"loader vertical-separation-large"})}),x=n(7),h=n(8),v=function(){function e(){var t=this;Object(x.a)(this,e),this.extractWordsFromInput=function(e){return e.split(/\s+/).filter((function(e){return""!==e}))},this.capitaliseString=function(e){return e?"( ".includes(e[0])?e[0]+t.capitaliseString(e.slice(1)):e[0].toUpperCase()+e.slice(1):e}}return Object(h.a)(e,[{key:"doubleURIEncode",value:function(e){return encodeURI(encodeURI(e))}},{key:"addQueryParamsToUrl",value:function(e,t){var n=Object.entries(t).map((function(e){return e.join("=")})).join("&");return e+"?"+this.doubleURIEncode(n)}}]),e}(),O=function(){function e(){Object(x.a)(this,e),this.API_URL="https://7z39hjjfg1.execute-api.eu-west-2.amazonaws.com/dev",this.utilsService=void 0,this.utilsService=new v}return Object(h.a)(e,[{key:"makeGetRequest",value:function(){var e=Object(m.a)(f.a.mark((function e(t,n){var a,s,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.API_URL+t,s={headers:{"Content-Type":"application/json"},method:"GET"},"undefined"!==typeof n&&(a=this.utilsService.addQueryParamsToUrl(a,n)),e.next=6,fetch(a,s);case 6:if(404!==(r=e.sent).status){e.next=9;break}throw new Error("An error occurred: "+r.statusText);case 9:return e.next=11,r.json();case 11:return c=e.sent,e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),g=(n(24),function(e){var t=e.setWordList,n=e.setErrorOccurred,s=Object(o.b)(),r=Object(i.a)(s,2),c=r[0],l=r[1],d=new O,j=new v,x=Object(a.useState)(""),h=Object(i.a)(x,2),g=h[0],w=h[1],N=Object(a.useState)(!1),y=Object(i.a)(N,2),k=y[0],_=y[1],D=Object(a.useRef)((function(e){}));D.current=function(){var e=Object(m.a)(f.a.mark((function e(a){var s,r,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),n(!1),l({words:s=a||g}),r=j.extractWordsFromInput(s),c={words:JSON.stringify(r)},e.prev=6,e.next=9,d.makeGetRequest("/words",c);case 9:i=e.sent,t(i),console.log(i),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(6),n(!0),console.log(e.t0);case 18:return e.prev=18,_(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[6,14,18,21]])})));return function(t){return e.apply(this,arguments)}}();var E=Object(a.useCallback)((function(e){"Enter"===e.key&&e.ctrlKey&&D.current()}),[]);Object(a.useEffect)((function(){return window.addEventListener("keydown",E),function(){window.removeEventListener("keydown",E)}}),[E]);var S=Object(a.useRef)((function(){}));S.current=function(){var e=c.get("words");null!==e&&""!==e&&(w(e),D.current(e))},Object(a.useEffect)((function(){S.current()}),[]);var C=Object(u.jsx)(b.a,{name:"main-input",className:"main-input",value:g,onChange:function(e){return w(e.target.value)}}),F=Object(u.jsx)("div",{className:"words-display vertical-separation-small",children:j.extractWordsFromInput(g).map((function(e,t){return Object(u.jsx)("div",{className:"word-display",children:e},t)}))}),I=Object(u.jsx)("button",{className:"button-primary vertical-separation-medium",type:"submit",onClick:function(e){return D.current()},children:"Submit"});return k?Object(u.jsx)(p,{}):Object(u.jsxs)(u.Fragment,{children:[C,F,I]})}),w=(n(25),function(e){var t=e.setWordList,n=Object(a.useState)(!1),s=Object(i.a)(n,2),r=s[0],c=s[1];return Object(u.jsxs)("div",{className:"input-page",children:[Object(u.jsx)(g,{setWordList:t,setErrorOccurred:c}),r&&Object(u.jsx)(d,{children:"An error occurred. Please try again"})]})}),N=n.p+"static/media/icon_plus.2cc3b49e.svg",y=n.p+"static/media/icon_minus.b9223dca.svg",k=(n(26),function(e){var t=e.currentDisplay,n=e.updateDisplay,a=e.maxDisplay,s=e.minDisplay,r=e.batchSize;return Object(u.jsxs)("div",{className:"expand-button-container flex-row unselectable",children:[t>s&&Object(u.jsx)("div",{className:"expand-button expand-button-decrease",onClick:function(){return n(Math.max(s,t-r))},children:Object(u.jsx)("img",{src:y,alt:"button to decrease the number of items displayed"})}),t<a&&Object(u.jsx)("div",{className:"expand-button expand-button-increase",onClick:function(){return n(Math.min(a,t+r))},children:Object(u.jsx)("img",{src:N,alt:"button to increase the number of items displayed"})})]})}),_=function(e){var t=e.rowsDisplay,n=e.updateRowsDisplay;return Object(u.jsx)(k,{updateDisplay:function(e){n(1===e)},minDisplay:0,maxDisplay:1,batchSize:1,currentDisplay:t?1:0})},D=n.p+"static/media/icon_play_button.7a4d59b8.svg",E=n.p+"static/media/icon_stop_button.00ad3332.svg",S=function(e){var t=e.audioData,n=Object(a.useState)(new Audio(t.url)),s=Object(i.a)(n,1)[0],r=Object(a.useState)(!1),c=Object(i.a)(r,2),o=c[0],l=c[1];return Object(a.useEffect)((function(){s.currentTime=0,o?s.play():s.pause()}),[o]),Object(a.useEffect)((function(){return s.addEventListener("ended",(function(){return l(!1)})),function(){s.removeEventListener("ended",(function(){return l(!1)}))}}),[]),Object(u.jsxs)("div",{className:"result-audio-row flex-row",children:[Object(u.jsx)("img",{src:o?E:D,alt:"audio player icon",className:"audio-player",onClick:function(){return l(!o)}}),Object(u.jsx)("div",{className:"result-audio-speaker",children:t.speaker}),Object(u.jsx)("div",{className:"result-audio-subtitle",children:t.subtitle||""})]})},C=function(e){var t=e.moduleTitle,n=e.audioData,s=Object(a.useState)(!1),r=Object(i.a)(s,2),c=r[0],o=r[1];return Object(u.jsxs)("div",{className:"result-audio-module vertical-separation-small",children:[Object(u.jsx)("div",{className:"audio-module-title",children:t}),n.filter((function(e,t){return function(e){return e<2||2===e&&3===n.length||!0===c}(t)})).map((function(e){return Object(u.jsx)(S,{audioData:e},e.speaker)})),n.length>3&&Object(u.jsx)(_,{rowsDisplay:c,updateRowsDisplay:o})]})},F=(n(27),function(e){var t=e.data,n=t.wanikani.main_data.audio.map((function(e){return{url:e.url,speaker:e.metadata.voice_actor_name,subtitle:e.metadata.voice_description}})),a=t.forvo.main_data.audio.map((function(e){return{url:e.url,speaker:e.username,subtitle:null}})),s=[{module:"Wanikani",audioData:n},{module:"Forvo",audioData:a},{module:"JapanesePod101",audioData:[{url:"https://audiostock-public-files.s3.ap-northeast-1.amazonaws.com/sample-files/demo_34d52dc1ec6ba4736f37c24458a2a7812e9b56f6.mp3",speaker:"Coming soon!",subtitle:null}]}];return n.length>0||a.length>0?Object(u.jsxs)("div",{className:"result-audio",children:[Object(u.jsx)("div",{className:"left-col-title",children:"Audio"}),s.filter((function(e){return e.audioData.length>0})).map((function(e){var t=e.module,n=e.audioData;return Object(u.jsx)(C,{moduleTitle:t,audioData:n},t)}))]}):Object(u.jsx)(u.Fragment,{})}),I=function(e){var t=e.ordinality,n=e.sense,a=new v,s=t+". "+n.english_definitions.map(a.capitaliseString).join(" ; ");return Object(u.jsxs)("div",{className:"result-definition-sense flex-col",children:[Object(u.jsx)("div",{className:"sense-part-of-speech",children:function(){var e=n.parts_of_speech.join("\u30fb");return n.tags.length>0&&(e+=" ("+n.tags.join(", ")+")"),e}()}),Object(u.jsx)("div",{className:"sense-english-definition",children:s})]})},L=function(e){var t=e.definitionData,n=function(e){return(e.word||e.reading||"")+(e.word&&e.reading?"\u3010".concat(e.reading,"\u3011"):"")},a=t.japanese.slice(1);return Object(u.jsxs)("div",{className:"result-definition flex-col",children:[Object(u.jsx)("div",{className:"result-definition-title mplus",children:n(t.japanese[0])}),Object(u.jsxs)("div",{className:"result-definition-senses-container flex-col",children:[t.senses.map((function(e,t){return Object(u.jsx)(I,{ordinality:t+1,sense:e},t)})),a.length>0&&Object(u.jsxs)("div",{className:"result-definition-other-forms flex-col",children:[Object(u.jsx)("div",{className:"result-other-forms-title",children:"Other forms"}),Object(u.jsx)("div",{className:"result-other-forms-words mplus",children:a.map(n).join("\u3001")})]})]})]})},R=(n(28),function(e){var t=e.data;return Object(u.jsx)("div",{className:"result-definitions-container flex-col",children:t.jisho.main_data.results.map((function(e){return Object(u.jsx)(L,{definitionData:e},e.slug)}))})}),W=function(e){var t=e.title,n=e.readings;return Object(u.jsxs)("div",{className:"readings-row",children:[Object(u.jsxs)("div",{className:"readings-row-left",children:[t,":"]}),Object(u.jsx)("div",{className:"readings-row-right",children:n.map((function(e,t){return Object(u.jsx)("div",{className:"reading",children:e},t)}))})]})},T=(n(29),function(e){var t=e.data,n=[{title:"OJAD",readings:t.ojad.main_data.accent},{title:"Wadoku",readings:t.wadoku.main_data.accent},{title:"Suzuki",readings:t.suzuki.main_data.accent}],a=function(e){return e.readings.length>0};return n.some(a)?Object(u.jsxs)("div",{className:"result-readings",children:[Object(u.jsx)("div",{className:"left-col-title",children:"Readings"}),n.filter(a).map((function(e){var t=e.title,n=e.readings;return Object(u.jsx)(W,{title:t,readings:n},t)}))]}):Object(u.jsx)(u.Fragment,{})}),A=function(e){var t=e.relatedWord,n=t.slug,a=t.japanese,s="https://jisho.org/word/".concat(n);return Object(u.jsx)("div",{className:"related-word",onClick:function(){return window.open(s,"_blank")},children:a[0].word||a[0].reading})},U=(n(30),function(e){var t=e.data;return t.jisho.main_data.extra.length>0?Object(u.jsxs)("div",{className:"result-related-words vertical-separation-small",children:[Object(u.jsx)("div",{className:"left-col-title",children:"Related words"}),Object(u.jsx)("div",{className:"related-words-container flex-row",children:t.jisho.main_data.extra.map((function(e){return Object(u.jsx)(A,{relatedWord:e},e.slug)}))})]}):Object(u.jsx)(u.Fragment,{})}),z=n(9),P=n(14),J=function(e){var t=e.sentence,n=e.source;return Object(u.jsxs)("div",{className:"result-sentence flex-col",children:[Object(u.jsxs)("div",{className:"result-sentence-top flex-row",children:[Object(u.jsx)("div",{className:"result-sentence-ja",children:t.ja}),Object(u.jsx)("div",{className:"result-sentence-source",children:"- ".concat(n)})]}),Object(u.jsx)("div",{className:"result-sentence-en",children:t.en})]})},M=(n(31),function(e){for(var t=Math.max.apply(Math,Object(P.a)(e.map((function(e){return e.length})))),n=[],a=0;a<t;a++){var s,r=Object(z.a)(e);try{for(r.s();!(s=r.n()).done;){var c=s.value;a<c.length&&n.push(c[a])}}catch(i){r.e(i)}finally{r.f()}}return n}),G=function(e){var t=e.data,n=t.wanikani.main_data.sentences.map((function(e){return{sentence:e,source:"Wanikani"}})),s=t.tangorin.main_data.sentences.map((function(e){return{sentence:e,source:"Tangorin"}})),r=M([n,s]),c=r.length,o=Math.min(r.length,4),l=Object(a.useState)(o),d=Object(i.a)(l,2),j=d[0],f=d[1];return r.length>0?Object(u.jsxs)("div",{className:"result-sentences flex-col",children:[Object(u.jsx)("div",{className:"right-col-title",children:"Context Sentences"}),Object(u.jsxs)("div",{className:"result-sentences-container flex-col",children:[r.filter((function(e,t){return t+1<=j})).map((function(e){var t=e.sentence,n=e.source;return Object(u.jsx)(J,{sentence:t,source:n},t.ja)})),Object(u.jsx)(k,{currentDisplay:j,updateDisplay:f,maxDisplay:c,minDisplay:o,batchSize:4})]})]}):Object(u.jsx)(u.Fragment,{})},q=function(e){var t=e.tag,n="wanikani"===t.slice(0,8)?"wanikani level ".concat(t.slice(8)):t.toLowerCase().replace("-"," ");return Object(u.jsx)("div",{className:"result-tag",children:n})},B=(n(32),function(e){var t=e.jisho.main_data.results.map((function(e){return[e.jlpt,e.tags]})).flat(2);return e.jisho.main_data.results.some((function(e){return e.is_common}))&&t.push("common word"),t}),Q=function(e){var t=e.data,n=B(t);return n.length>0?Object(u.jsx)("div",{className:"result-tags-container flex-row",children:n.map((function(e){return Object(u.jsx)(q,{tag:e},e)}))}):Object(u.jsx)(u.Fragment,{})},K=(n(33),function(e){var t=e.children,n=e.isExpanded,a=e.toggleIsExpanded;return Object(u.jsxs)("div",{className:"result-title",children:[Object(u.jsx)("div",{className:"result-title-text mplus",children:t}),Object(u.jsx)("div",{className:"title-collapser unselectable",onClick:a,children:n?"collapse":"expand"})]})}),V=n.p+"static/media/icon_chevron_up.0c1b14a0.svg",H=n.p+"static/media/icon_chevron_down.fee13e32.svg",X=(n(34),function(e){var t=e.isExpanded,n=e.toggleIsExpanded,a=t?V:H;return Object(u.jsx)("div",{className:"result-toggle-bar",onClick:n,children:Object(u.jsx)("img",{src:a,alt:"chevron to expand or collapse the result"})})}),Y=(n(35),function(e){var t=e.data,n=Object(a.useState)(!0),s=Object(i.a)(n,2),r=s[0],c=s[1],o=function(){return c(!r)};return Object(u.jsxs)("div",{className:"result-block flex-col",children:[Object(u.jsx)(K,{isExpanded:r,toggleIsExpanded:o,children:t.word}),r&&Object(u.jsxs)("div",{className:"flex-row",children:[Object(u.jsxs)("div",{className:"result-left-col flex-col",children:[Object(u.jsx)(T,{data:t}),Object(u.jsx)(Q,{data:t}),Object(u.jsx)(F,{data:t}),Object(u.jsx)(U,{data:t})]}),Object(u.jsx)("div",{className:"result-col-separator"}),Object(u.jsxs)("div",{className:"result-right-col flex-col",children:[Object(u.jsx)(R,{data:t}),Object(u.jsx)(G,{data:t})]})]}),Object(u.jsx)(X,{isExpanded:r,toggleIsExpanded:o})]})}),Z=(n(36),function(e){var t=e.wordList;return Object(u.jsx)("div",{className:"results-list",children:t.map((function(e){return Object(u.jsx)(Y,{data:e},e.word)}))})});n(37);var $=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(u.jsx)(o.a,{children:Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)("div",{className:"width-container",children:[Object(u.jsx)("p",{className:"app-header",children:"Japanese Vocab Fetcher"}),Object(u.jsx)(w,{setWordList:s}),Object(u.jsx)(Z,{wordList:n})]})})})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))};c.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)($,{})}),document.getElementById("root")),ee()}]),[[38,1,2]]]);
//# sourceMappingURL=main.dd55a343.chunk.js.map