# pylint: disable=non-ascii-name

from typing import DefaultDict, Dict, List, Optional, TypedDict

from bs4 import BeautifulSoup as Soup


# General types

class 書方(str):
    """Kanji writing of a word"""

class 読方(str):
    """Accented reading of a word"""

class URL(str):
    """String representing a URL"""

class HTMLString(str):
    """An HTML file stored as a string"""


# Jisho

class JishoDict(Dict):
    """Dictionary generated by the Jisho module upon fetching a word's definition etc"""


# Accents

class AccentDict(TypedDict):
    """Dictionary generated by modules that fetch the accent of words (ie OJAD, Suzuki, Wadoku)"""
    expected_output: Dict[書方, List[読方]]


class WadokuExpectedSection(TypedDict):
    """Dictionary containing an HTML section extracted by the Wadoku module
    and its contained information"""
    writing_section: Soup
    writings: List[書方]
    reading_sections: Soup
    readings: List[読方]


class WadokuAccentDict(AccentDict):
    """Dictionary generated by the Wadoku module"""
    html: HTMLString
    url: URL
    expected_sections: List[WadokuExpectedSection]
    full_accent_dict: DefaultDict[書方, List[読方]]


class SuzukiExpectedSection(TypedDict):
    """Dictionary containing an HTML section extracted by the Suzuki module
    and its contained information"""
    writing_section: Soup
    writing: 書方
    reading_section: Soup
    accent_section: Soup
    reading: 読方


class SuzukiAccentDict(AccentDict):
    """Dictionary generated by the Suzuki module"""
    html: HTMLString
    formdata: Dict[str, str]
    expected_sections: List[SuzukiExpectedSection]


class OjadExpectedSection(TypedDict):
    """Dictionary containing an HTML section extracted by the OJAD module
    and its contained information"""
    writing_section: Soup
    writings: List[書方]
    reading_sections: List[Soup]
    readings: List[読方]


class OjadAccentDict(AccentDict):
    """Dictionary generated by the OJAD module"""
    htmls: List[HTMLString]
    url: URL
    expected_sections: List[OjadExpectedSection]
    full_accent_dict: DefaultDict[書方, List[読方]]


# Audio

class AudioDict(Dict):
    """Dictionary generated by modules that fetch audio files of words (ie Forvo, Wanikani)"""


# Expected final result

class ExpectedResultAccents(TypedDict):
    """File of the final result containing the fetched accented readings"""
    ojad: List[読方]
    suzuki: List[読方]
    wadoku: List[読方]

class ExpectedResultAudio(TypedDict):
    """Field of the final result containing URLs to audio files"""
    forvo: List[URL]
    wanikani: List[URL]

class ExpectedResult(TypedDict):
    """Expected output for the main get_info() function"""
    word: 書方
    jisho: JishoDict
    accent: ExpectedResultAccents
    audio: ExpectedResultAudio


# Complete test dictionary type

class FullTestDict(TypedDict):
    """A dictionary containing all the information and expected results for any test"""
    id: str
    input: List[書方]
    jisho: JishoDict
    ojad: AccentDict
    suzuki: SuzukiAccentDict
    wadoku: WadokuAccentDict
    forvo: AudioDict
    wanikani: AudioDict
    expected_result: List[ExpectedResult]
