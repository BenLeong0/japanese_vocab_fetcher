(this["webpackJsonpreact-interface"]=this["webpackJsonpreact-interface"]||[]).push([[0],Array(18).concat([function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(10),c=n.n(s),i=(n(18),n(2)),o=n.p+"static/media/icon_error.f3363445.svg",l=(n(19),n(0)),u=function(e){var t=e.children;return Object(l.jsxs)("div",{className:"error-message vertical-separation-large",children:[Object(l.jsx)("img",{src:o,alt:"error icon"}),t,Object(l.jsx)("img",{src:o,alt:"error icon"})]})},d=n(4),j=n.n(d),m=n(6),f=n(12),b=(n(22),function(){return Object(l.jsx)("div",{className:"loader vertical-separation-large"})}),x=n(7),h=n(8),p=function(){function e(){Object(x.a)(this,e),this.extractWordsFromInput=function(e){return e.split(/\s+/).filter((function(e){return""!==e}))}}return Object(h.a)(e,[{key:"doubleURIEncode",value:function(e){return encodeURI(encodeURI(e))}},{key:"addQueryParamsToUrl",value:function(e,t){var n=Object.entries(t).map((function(e){return e.join("=")})).join("&");return e+"?"+this.doubleURIEncode(n)}}]),e}(),v=function(){function e(){Object(x.a)(this,e),this.API_URL="https://7z39hjjfg1.execute-api.eu-west-2.amazonaws.com/dev",this.utilsService=void 0,this.utilsService=new p}return Object(h.a)(e,[{key:"makeGetRequest",value:function(){var e=Object(m.a)(j.a.mark((function e(t,n){var a,r,s,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.API_URL+t,r={headers:{"Content-Type":"application/json"},method:"GET"},"undefined"!==typeof n&&(a=this.utilsService.addQueryParamsToUrl(a,n)),e.next=6,fetch(a,r);case 6:if(404!==(s=e.sent).status){e.next=9;break}throw new Error("An error occurred: "+s.statusText);case 9:return e.next=11,s.json();case 11:return c=e.sent,e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),O=(n(23),function(e){var t=e.setWordList,n=e.setErrorOccurred,r=new v,s=new p,c=Object(a.useState)(""),o=Object(i.a)(c,2),u=o[0],d=o[1],x=Object(a.useState)(!1),h=Object(i.a)(x,2),O=h[0],g=h[1],N=Object(a.useRef)((function(){}));N.current=Object(m.a)(j.a.mark((function e(){var a,c,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),n(!1),a=s.extractWordsFromInput(u),c={words:JSON.stringify(a)},e.prev=4,e.next=7,r.makeGetRequest("/words",c);case 7:i=e.sent,t(i),console.log(i),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),n(!0),console.log(e.t0);case 16:return e.prev=16,g(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[4,12,16,19]])})));var w=Object(a.useCallback)((function(e){"Enter"===e.key&&e.ctrlKey&&N.current()}),[]);Object(a.useEffect)((function(){return window.addEventListener("keydown",w),function(){window.removeEventListener("keydown",w)}}),[w]);var y=Object(l.jsx)(f.a,{name:"main-input",className:"main-input",value:u,onChange:function(e){return d(e.target.value)}}),k=Object(l.jsx)("div",{className:"words-display vertical-separation-small",children:s.extractWordsFromInput(u).map((function(e,t){return Object(l.jsx)("div",{className:"word-display",children:e},t)}))}),_=Object(l.jsx)("button",{className:"button-primary vertical-separation-medium",type:"submit",onClick:function(e){return N.current()},children:"Submit"});return O?Object(l.jsx)(b,{}):Object(l.jsxs)(l.Fragment,{children:[y,k,_]})}),g=(n(24),function(e){var t=e.setWordList,n=Object(a.useState)(!1),r=Object(i.a)(n,2),s=r[0],c=r[1];return Object(l.jsxs)("div",{className:"input-page",children:[Object(l.jsx)(O,{setWordList:t,setErrorOccurred:c}),s?Object(l.jsx)(u,{children:"An error occurred. Please try again"}):Object(l.jsx)(l.Fragment,{})]})}),N=(n(25),n.p+"static/media/icon_plus.2cc3b49e.svg"),w=n.p+"static/media/icon_minus.b9223dca.svg",y=(n(26),function(e){var t=e.currentDisplay,n=e.updateDisplay,a=e.maxDisplay,r=e.minDisplay,s=e.batchSize;return Object(l.jsxs)("div",{className:"expand-button-container flex-row",children:[t>r&&Object(l.jsx)("div",{className:"expand-button expand-button-decrease",onClick:function(){return n(Math.max(r,t-s))},children:Object(l.jsx)("img",{src:w,alt:"button to decrease the number of items displayed"})}),t<a&&Object(l.jsx)("div",{className:"expand-button expand-button-increase",onClick:function(){return n(Math.min(a,t+s))},children:Object(l.jsx)("img",{src:N,alt:"button to increase the number of items displayed"})})]})}),k=n.p+"static/media/icon_play_button.7a4d59b8.svg",_=n.p+"static/media/icon_stop_button.00ad3332.svg",D=function(e){var t=e.audioData,n=Object(a.useState)(new Audio(t.url)),r=Object(i.a)(n,1)[0],s=Object(a.useState)(!1),c=Object(i.a)(s,2),o=c[0],u=c[1];return Object(a.useEffect)((function(){r.currentTime=0,o?r.play():r.pause()}),[o]),Object(a.useEffect)((function(){return r.addEventListener("ended",(function(){return u(!1)})),function(){r.removeEventListener("ended",(function(){return u(!1)}))}}),[]),Object(l.jsxs)("div",{className:"result-audio-row flex-row",children:[Object(l.jsx)("img",{src:o?_:k,alt:"audio player icon",className:"audio-player",onClick:function(){return u(!o)}}),Object(l.jsx)("div",{className:"result-audio-speaker",children:t.speaker}),Object(l.jsx)("div",{className:"result-audio-subtitle",children:t.subtitle||""})]})},E=function(e){var t=e.moduleTitle,n=e.audioData,r=n.length,s=n.length<=3?n.length:2,c=Object(a.useState)(s),o=Object(i.a)(c,2),u=o[0],d=o[1];return Object(l.jsxs)("div",{className:"result-audio-module vertical-separation-small",children:[Object(l.jsx)("div",{className:"audio-module-title",children:t}),n.filter((function(e,t){return function(e){return e+1<=u}(t)})).map((function(e){return Object(l.jsx)(D,{audioData:e},e.speaker)})),Object(l.jsx)(y,{currentDisplay:u,updateDisplay:d,maxDisplay:r,minDisplay:s,batchSize:999})]})},S=function(e){var t=e.data,n=t.wanikani.main_data.audio.map((function(e){return{url:e.url,speaker:e.metadata.voice_actor_name,subtitle:e.metadata.voice_description}})),a=t.forvo.main_data.audio.map((function(e){return{url:e.url,speaker:e.username,subtitle:null}})),r=[{module:"Wanikani",audioData:n},{module:"Forvo",audioData:a},{module:"JapanesePod101",audioData:[{url:"https://audiostock-public-files.s3.ap-northeast-1.amazonaws.com/sample-files/demo_34d52dc1ec6ba4736f37c24458a2a7812e9b56f6.mp3",speaker:"Coming soon!",subtitle:null}]}];return n.length>0||a.length>0?Object(l.jsxs)("div",{className:"result-audio",children:[Object(l.jsx)("div",{className:"left-col-title",children:"Audio"}),r.filter((function(e){return e.audioData.length>0})).map((function(e){var t=e.module,n=e.audioData;return Object(l.jsx)(E,{moduleTitle:t,audioData:n},t)}))]}):Object(l.jsx)(l.Fragment,{})},C=function(e){var t=e.ordinality,n=e.sense,a=t+". "+n.english_definitions.join("; ");return Object(l.jsxs)("div",{className:"result-definition-sense flex-col",children:[Object(l.jsx)("div",{className:"sense-part-of-speech",children:function(){var e=n.parts_of_speech.join("\u30fb");return n.tags.length>0&&(e+=" ("+n.tags.join(", ")+")"),e}()}),Object(l.jsx)("div",{className:"sense-english-definition",children:a})]})},F=function(e){var t=e.definitionData,n=function(e){return(e.word||e.reading||"")+(e.word&&e.reading?"\u3010".concat(e.reading,"\u3011"):"")},a=t.japanese.slice(1);return Object(l.jsxs)("div",{className:"result-definition flex-col",children:[Object(l.jsx)("div",{className:"result-definition-title",children:n(t.japanese[0])}),Object(l.jsxs)("div",{className:"result-definition-senses-container flex-col",children:[t.senses.map((function(e,t){return Object(l.jsx)(C,{ordinality:t+1,sense:e},t)})),a.length>0&&Object(l.jsxs)("div",{className:"result-definition-other-forms flex-col",children:[Object(l.jsx)("div",{className:"result-other-forms-title",children:"Other forms"}),Object(l.jsx)("div",{className:"result-other-forms-words",children:a.map(n).join("\u3001")})]})]})]})},I=(n(27),function(e){var t=e.data;return Object(l.jsx)("div",{className:"result-definitions-container flex-col",children:t.jisho.main_data.results.map((function(e){return Object(l.jsx)(F,{definitionData:e},e.slug)}))})}),L=(n(28),function(e){var t=e.title,n=e.readings;return Object(l.jsxs)("div",{className:"readings-row",children:[Object(l.jsxs)("div",{className:"readings-row-left",children:[t,":"]}),Object(l.jsx)("div",{className:"readings-row-right",children:n.map((function(e,t){return Object(l.jsx)("div",{className:"reading",children:e},t)}))})]})}),W=function(e){var t=e.data,n=[{title:"OJAD",readings:t.ojad.main_data.accent},{title:"Wadoku",readings:t.wadoku.main_data.accent},{title:"Suzuki",readings:t.suzuki.main_data.accent}];return n.some((function(e){return e.readings.length>0}))?Object(l.jsxs)("div",{className:"result-readings",children:[Object(l.jsx)("div",{className:"left-col-title",children:"Readings"}),n.filter((function(e){return e.readings.length>0})).map((function(e){var t=e.title,n=e.readings;return Object(l.jsx)(L,{title:t,readings:n},t)}))]}):Object(l.jsx)(l.Fragment,{})},R=function(e){var t=e.relatedWord,n=t.slug,a=t.japanese,r="https://jisho.org/word/".concat(n);return Object(l.jsx)("div",{className:"related-word",onClick:function(){return window.open(r,"_blank")},children:a[0].word||a[0].reading})},T=(n(29),function(e){var t=e.data;return t.jisho.main_data.extra.length>0?Object(l.jsxs)("div",{className:"result-related-words vertical-separation-small",children:[Object(l.jsx)("div",{className:"left-col-title",children:"Related words"}),Object(l.jsx)("div",{className:"related-words-container flex-row",children:t.jisho.main_data.extra.map((function(e){return Object(l.jsx)(R,{relatedWord:e},e.slug)}))})]}):Object(l.jsx)(l.Fragment,{})}),A=n(11),z=n(13),P=function(e){var t=e.sentence,n=e.source;return Object(l.jsxs)("div",{className:"result-sentence flex-col",children:[Object(l.jsxs)("div",{className:"result-sentence-top flex-row",children:[Object(l.jsx)("div",{className:"result-sentence-ja",children:t.ja}),Object(l.jsx)("div",{className:"result-sentence-source",children:"- ".concat(n)})]}),Object(l.jsx)("div",{className:"result-sentence-en",children:t.en})]})},U=(n(30),function(e){for(var t=Math.max.apply(Math,Object(z.a)(e.map((function(e){return e.length})))),n=[],a=0;a<t;a++){var r,s=Object(A.a)(e);try{for(s.s();!(r=s.n()).done;){var c=r.value;a<c.length&&n.push(c[a])}}catch(i){s.e(i)}finally{s.f()}}return n}),J=function(e){var t=e.data,n=t.wanikani.main_data.sentences.map((function(e){return{sentence:e,source:"Wanikani"}})),r=t.tangorin.main_data.sentences.map((function(e){return{sentence:e,source:"Tangorin"}})),s=U([n,r]),c=s.length,o=Math.min(s.length,4),u=Object(a.useState)(o),d=Object(i.a)(u,2),j=d[0],m=d[1];return s.length>0?Object(l.jsxs)("div",{className:"result-sentences flex-col",children:[Object(l.jsx)("div",{className:"right-col-title",children:"Context Sentences"}),Object(l.jsxs)("div",{className:"result-sentences-container flex-col",children:[s.filter((function(e,t){return function(e){return e+1<=j}(t)})).map((function(e){var t=e.sentence,n=e.source;return Object(l.jsx)(P,{sentence:t,source:n},t.ja)})),Object(l.jsx)(y,{currentDisplay:j,updateDisplay:m,maxDisplay:c,minDisplay:o,batchSize:4})]})]}):Object(l.jsx)(l.Fragment,{})},M=function(e){var t=e.tag,n="wanikani"===t.slice(0,8)?"wanikani level ".concat(t.slice(8)):t.toLowerCase().replace("-"," ");return Object(l.jsx)("div",{className:"result-tag",children:n})},G=(n(31),function(e){var t=e.jisho.main_data.results.map((function(e){return[e.jlpt,e.tags]})).flat(2);return e.jisho.main_data.results.some((function(e){return e.is_common}))&&t.push("common word"),t}),q=function(e){var t=e.data,n=G(t);return n.length>0?Object(l.jsx)("div",{className:"result-tags-container flex-row",children:n.map((function(e){return Object(l.jsx)(M,{tag:e},e)}))}):Object(l.jsx)(l.Fragment,{})},B=(n(32),function(e){var t=e.children,n=e.isExpanded,a=e.toggleIsExpanded;return Object(l.jsxs)("div",{className:"result-title",children:[Object(l.jsx)("div",{className:"result-title-text",children:t}),Object(l.jsx)("div",{className:"title-collapser",onClick:a,children:n?"collapse":"expand"})]})}),Q=n.p+"static/media/icon_chevron_up.0c1b14a0.svg",K=n.p+"static/media/icon_chevron_down.fee13e32.svg",V=(n(33),function(e){var t=e.isExpanded,n=e.toggleIsExpanded,a=t?Q:K;return Object(l.jsx)("div",{className:"result-toggle-bar",onClick:n,children:Object(l.jsx)("img",{src:a,alt:"chevron to expand or collapse the result"})})}),H=(n(34),function(e){var t=e.data,n=Object(a.useState)(!0),r=Object(i.a)(n,2),s=r[0],c=r[1],o=function(){return c(!s)};return Object(l.jsxs)("div",{className:"result-block flex-col",children:[Object(l.jsx)(B,{isExpanded:s,toggleIsExpanded:o,children:t.word}),s&&Object(l.jsxs)("div",{className:"flex-row",children:[Object(l.jsxs)("div",{className:"result-left-col flex-col",children:[Object(l.jsx)(W,{data:t}),Object(l.jsx)(q,{data:t}),Object(l.jsx)(S,{data:t}),Object(l.jsx)(T,{data:t})]}),Object(l.jsx)("div",{className:"result-col-separator"}),Object(l.jsxs)("div",{className:"result-right-col flex-col",children:[Object(l.jsx)(I,{data:t}),Object(l.jsx)(J,{data:t})]})]}),Object(l.jsx)(V,{isExpanded:s,toggleIsExpanded:o})]})}),X=(n(35),function(e){var t=e.wordList;return Object(l.jsx)("div",{className:"results-list",children:t.map((function(e){return Object(l.jsx)(H,{data:e},e.word)}))})});n(36);var Y=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)("div",{className:"width-container",children:[Object(l.jsx)("p",{className:"app-header",children:"Japanese Vocab Fetcher"}),Object(l.jsx)(g,{setWordList:r}),Object(l.jsx)(X,{wordList:n})]})})},Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};c.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(Y,{})}),document.getElementById("root")),Z()}]),[[37,1,2]]]);
//# sourceMappingURL=main.04620fab.chunk.js.map