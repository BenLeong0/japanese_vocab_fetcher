# pylint: disable=non-ascii-name

from typing import DefaultDict, Dict, List, Optional, TypedDict

from bs4 import BeautifulSoup as Soup


# General types

class 書方(str):
    """Kanji writing of a word"""

class 読方(str):
    """Accented reading of a word"""

class URL(str):
    """String representing a URL"""

class HTMLString(str):
    """An HTML file stored as a string"""


# Jisho

class JishoDict(Dict):
    """Dictionary generated by the Jisho module upon fetching a word's definition etc"""


# Accents

class AccentRequest(TypedDict):
    url: URL
    formdata: Optional[Dict[str, str]]

class ExpectedSection(TypedDict):
    """Expected sections to be extracted from the HTML string (both writing and reading),
    and the expected results to be extracted"""
    writing_section: Soup
    writings: List[書方]
    reading_sections: Soup
    readings: List[読方]


class AccentDict(TypedDict):
    """Dictionary generated by modules that fetch the accent of words (ie OJAD, Suzuki, Wadoku)"""
    html: HTMLString
    request: AccentRequest
    expected_sections: List[ExpectedSection]
    full_accent_dict: DefaultDict[書方, List[読方]]
    expected_output: Dict[書方, List[読方]]


# Audio

class AudioDict(Dict):
    """Dictionary generated by modules that fetch audio files of words (ie Forvo, Wanikani)"""


# Expected final result

class ExpectedResultAccents(TypedDict):
    """File of the final result containing the fetched accented readings"""
    ojad: List[読方]
    suzuki: List[読方]
    wadoku: List[読方]

class ExpectedResultAudio(TypedDict):
    """Field of the final result containing URLs to audio files"""
    forvo: List[URL]
    wanikani: List[URL]

class ExpectedResult(TypedDict):
    """Expected output for the main get_info() function"""
    word: 書方
    jisho: JishoDict
    accent: ExpectedResultAccents
    audio: ExpectedResultAudio


# Complete test dictionary type

class TestDict(TypedDict):
    """A dictionary containing all the information and expected results for any test"""
    id: str
    input: List[書方]
    jisho: JishoDict
    ojad: AccentDict
    suzuki: AccentDict
    wadoku: AccentDict
    forvo: AudioDict
    wanikani: AudioDict
    expected_result: List[ExpectedResult]
